<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="DKG Metadata Module"><meta name="keywords" content="rust, rustlang, rust-lang, pallet_dkg_metadata"><title>pallet_dkg_metadata - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings" ></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../pallet_dkg_metadata/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><h2 class="location">Crate pallet_dkg_metadata</h2><div class="block version"><div class="narrow-helper"></div><p>Version 0.1.0</p></div><div class="sidebar-elems"><a id="all-types" href="all.html"><p>See all pallet_dkg_metadata's items</p></a><div class="block items"><ul><li><a href="#modules">Modules</a></li></ul></div><div id="sidebar-vars" data-name="pallet_dkg_metadata" data-ty="mod" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Crate <a class="mod" href="#">pallet_dkg_metadata</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/pallet_dkg_metadata/lib.rs.html#15-1275" title="goto source code">[src]</a></span></h1><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="dkg-metadata-module" class="section-header"><a href="#dkg-metadata-module">DKG Metadata Module</a></h2>
<p>A pallet to manage metadata about the DKG and DKG proposal system.</p>
<h3 id="overview" class="section-header"><a href="#overview">Overview</a></h3>
<p>The DKG Metadata pallet manages the following metadata about the DKG and DKG proposal system:</p>
<ul>
<li>The active DKG public key</li>
<li>The active DKG authorities</li>
<li>The next DKG public key</li>
<li>The next DKG authorities</li>
<li>The DKG signature threshold (the <code>t</code> in <code>t-out-of-n</code> threshold signatures)</li>
<li>The key refresh process</li>
<li>The misbehavior reporting process</li>
</ul>
<p>The pallet tracks authority changes after each session and updates the metadata for the
current and next authority sets respectively. The pallet also exposes a way for the root origin
to update the signature threshold used in the DKG signing system.</p>
<p>The pallet is responsible with initiating the key refresh process for rotating the DKG keys
across authority set changes and executing the rotation when a new session starts.</p>
<p>The pallet tracks reputations of DKG authorities by providing extrinsics and storage for
submitting misbehaviour reports about authorities that misbehave.</p>
<h4 id="terminology" class="section-header"><a href="#terminology">Terminology</a></h4>
<ul>
<li><strong>Authority</strong>: A DKG authority.</li>
<li><strong>Authority Set</strong>: A set of DKG authorities.</li>
<li><strong>Active DKG public key</strong>: The public key of the DKG protocol that is currently active.</li>
<li><strong>Next DKG public key</strong>: The public key of the DKG protocol that will be active after the next
authority set change.</li>
<li><strong>DKG signature threshold</strong>: The <code>t</code> in <code>t-out-of-n</code> threshold signatures used in the DKG
signing system.</li>
<li><strong>Misbheaviour Report</strong>: A report of a DKG authority misbehaving.</li>
<li><strong>Refresh delay</strong>: The length of time within a session that the key refresh protocol will be
initiated.</li>
</ul>
<h4 id="implementation" class="section-header"><a href="#implementation">Implementation</a></h4>
<p>The pallet is implemented to track and maintain a variety of different pieces of data. It is the
primary pallet used to store the active and next DKG public keys that are generated by the
active and next authorities of the underlying blockchain protocol. A runtime API is used to
expose the active and next authorities to the external workers responsible with executing the
DKG and signing protocol.</p>
<p>The pallet exposes a variety of extrinsics for updating metadata:</p>
<ul>
<li><code>set_threshold</code>: Allows a root-origin to update the DKG signature threshold used in the
threshold signing protocol.</li>
<li><code>set_refresh_delay</code>: Allows a root-origin to update the delay before the key refresh process
is initiated.</li>
<li><code>submit_misbehaviour_reports</code>: Allows authorities to submit misbehaviour reports. Once the
<code>threshold</code> number of reports is submitted, the offending authority will lose reputation.</li>
<li><code>submit_public_key</code>: Allows submitting of the genesis public key by the initial authorities of
the DKG protocol.</li>
<li><code>submit_next_public_key</code>: Allows submitting of the next public key by the next authorities of
the DKG protocol.</li>
<li><code>submit_public_key_signature</code>: Allows submitting of the signature of the next public key by
the active DKG key for eventual rotation.</li>
</ul>
<p>The refresh process is initiated <code>T::RefreshDelay</code> into each session. A RefreshProposal is
created and sent directly to the <code>pallet-dkg-proposal-handler</code> for inclusion into the unsigned
proposal queue and soon after for signing. Once this proposal is signed, the signature is posted
back on-chain to this pallet which rotates the DKG keys when the session ends.</p>
<p>The misbehaviour reporting process relies on a honest-threshold assumption. When DKG authorities
misbehave offchain, any detecting authority can submit a report of the offending authority. If a
<code>threshold</code> number of reports is submitted, then the offending authority will lose reputation.
This reputation map is utilized by each DKG authority to ensure every authority can generate a
deterministic signing set for the threshold signing protocols. The signing set is taken to
initially be the top <code>t</code> DKG authorities by reputation.</p>
<h3 id="related-modules" class="section-header"><a href="#related-modules">Related Modules</a></h3>
<ul>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame/system"><code>System</code></a></li>
<li><a href="https://github.com/paritytech/substrate/tree/master/frame/support"><code>Support</code></a></li>
<li><a href="../../pallet-dkg-proposals"><code>DKG Proposals</code></a></li>
<li><a href="../../pallet-dkg-proposal-handler"><code>DKG Proposal Handler</code></a></li>
</ul>
</div></details><h2 id="reexports" class="section-header"><a href="#reexports">Re-exports</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left import-item"><code>pub use <a class="mod" href="pallet/index.html" title="mod pallet_dkg_metadata::pallet">pallet</a>::*;</code></div><div class="item-right docblock-short"></div></div></div><h2 id="modules" class="section-header"><a href="#modules">Modules</a></h2>
<div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="pallet/index.html" title="pallet_dkg_metadata::pallet mod">pallet</a></div><div class="item-right docblock-short"><p>The module that hosts all the
<a href="https://docs.substrate.io/v3/runtime/frame">FRAME</a>
types needed to add this pallet to a
runtime.</p>
</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="types/index.html" title="pallet_dkg_metadata::types mod">types</a></div><div class="item-right docblock-short"></div></div></div></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="pallet_dkg_metadata" data-search-index-js="../search-index.js" data-search-js="../search.js"></div>
    <script src="../main.js"></script>
</body></html>